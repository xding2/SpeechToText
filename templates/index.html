<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>实时语音转文本 | 专业转录工具</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <header>
            <h1><i class="fas fa-microphone"></i> 实时语音转文本</h1>
            <p class="subtitle">专业、高效的语音识别工具</p>
        </header>

        <div class="control-panel">
            <div class="language-selector">
                <label for="language">识别语言:</label>
                <select id="language">
                    <option value="zh-CN">中文 (简体)</option>
                    <option value="en-US">英语 (美国)</option>
                    <option value="ja-JP">日语</option>
                    <option value="ko-KR">韩语</option>
                    <option value="fr-FR">法语</option>
                    <option value="de-DE">德语</option>
                    <option value="es-ES">西班牙语</option>
                    <option value="ru-RU">俄语</option>
                </select>
            </div>

            <div class="audio-source">
                <label for="audioSource">音频源:</label>
                <select id="audioSource">
                    <option value="microphone">麦克风</option>
                    <option value="system">系统声音</option>
                </select>
            </div>

            <div class="buttons">
                <button id="startBtn" class="btn primary"><i class="fas fa-play"></i> 开始录音</button>
                <button id="pauseBtn" class="btn secondary" disabled><i class="fas fa-pause"></i> 暂停</button>
                <button id="stopBtn" class="btn secondary" disabled><i class="fas fa-stop"></i> 停止</button>
                <button id="clearBtn" class="btn danger"><i class="fas fa-trash"></i> 清除</button>
                <button id="copyBtn" class="btn info"><i class="fas fa-copy"></i> 复制文本</button>
                <button id="saveBtn" class="btn success"><i class="fas fa-save"></i> 保存</button>
            </div>
        </div>

        <div class="status-panel">
            <div class="status">状态: <span id="status">就绪</span></div>
            <div class="record-time" id="recordTime">00:00:00</div>
        </div>

        <div class="transcript-container">
            <div class="transcript-header">
                <h2>转录文本</h2>
                <div class="transcript-stats">
                    <span id="wordCount">0 词</span> | 
                    <span id="charCount">0 字符</span>
                </div>
            </div>
            <div id="transcript" class="transcript" contenteditable="true"></div>
            <div id="interim" class="interim-result"></div>
        </div>

        <div class="info-panel">
            <div class="info-toggle" onclick="toggleInfo()">
                <i class="fas fa-info-circle"></i> 使用说明
            </div>
            <div class="info-content" id="infoContent">
                <h3>如何使用:</h3>
                <ol>
                    <li>选择语言和音频源</li>
                    <li>点击"开始录音"按钮开始识别</li>
                    <li>说话或播放需要转录的音频</li>
                    <li>识别的文本将实时显示在转录区域</li>
                    <li>完成后点击"停止"，可以编辑、复制或保存文本</li>
                </ol>
                <h3>说话者识别功能:</h3>
                <p>系统会尝试通过以下方式区分不同的说话者:</p>
                <ul>
                    <li><strong>关键词+时间间隔</strong>: 同时使用语句结构和语音停顿来区分说话者</li>
                    <li><strong>仅按时间间隔</strong>: 只根据停顿时间来区分说话者，可通过滑块调整停顿阈值</li>
                    <li><strong>关闭</strong>: 不区分说话者，所有文本使用同一格式</li>
                </ul>
                <p><strong>注意:</strong> 系统声音录制功能需要浏览器支持音频捕获API。</p>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 实时语音转文本 | 保留所有权利</p>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>